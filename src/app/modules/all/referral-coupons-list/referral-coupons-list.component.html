<div class="row mt-2">
  <div class="col-xl-4">
      <div class="card card-custom bgi-no-repeat card-stretch gutter-b" *ngIf="centersData?.length">
          <div class="card-body cursor-pointer">
              <span class="card-title font-weight-bolder text-dark-75 font-size-h2 mb-0 d-block">{{centersData?.length}}</span>
              <span class="font-weight-bold text-muted font-size-sm">Total Referral Coupon</span>
          </div>
      </div>
  </div>
  <div class="col-xl-4">
      <div class="card card-custom bgi-no-repeat card-stretch gutter-b">
          <div class="card-body cursor-pointer">
              <span class="card-title font-weight-bolder text-dark-75 font-size-h2 mb-0 d-block">{{referralCouponCount}}</span>
              
              <span class="font-weight-bold text-muted font-size-sm">Total Referral Coupon Redeemed</span>
          </div>
      </div>
  </div>
  <div class="col-xl-4">
      <div class="card card-custom bgi-no-repeat card-stretch gutter-b">
          <div class="card-body cursor-pointer">
              <span class="card-title font-weight-bolder text-dark-75 font-size-h2 mb-0 d-block">{{referralCouponCount * 500}}</span>
              <span class="font-weight-bold text-muted font-size-sm">Usage Value</span>
          </div>
      </div>
  </div>
 
</div>

<div class="card card-custom gutter-b">
  <div class="card-header">
    <div class="card-title">
      <h3 class="card-label">Referral</h3>
    </div>
  </div>
  <div class="card-body pt-0">
    <div class="form form-label-right">
      <div class="form-group row">
        <div class="col-lg-12">
          <input type="text" class="form-control" (keyup)="onSearch()" [(ngModel)]="searchText" placeholder="Search"
            value="" />
          <small class="form-text text-muted"><b>Search</b> in all fields</small>
        </div>
      </div>
    </div>
    <div class="table-responsive angular-bootstrap-table">
      <table id="excel-table"  class="table table-head-custom table-vertical-center overflow-hidden">
        <thead>
          
          <th name="customerId" ngDefaultControl [(ngModel)]="tableHeader.customerId" (click)="onSort('customerId')">
            <i *ngIf="tableHeader.customerId === 1 && activeSort === 'customerId'" class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.customerId === 0 && activeSort === 'customerId'"
              class="fas fa-long-arrow-alt-down"></i>
            Customer Id
          </th>
          <th name="customerName" ngDefaultControl [(ngModel)]="tableHeader.customerName" (click)="onSort('customerName')">
            <i *ngIf="tableHeader.customerName === 1 && activeSort === 'customerName'" class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.customerName === 0 && activeSort === 'customerName'"
              class="fas fa-long-arrow-alt-down"></i>
            Customer Name
          </th>
          <th name="customerPhone" ngDefaultControl [(ngModel)]="tableHeader.customerPhone" (click)="onSort('customerPhone')">
            <i *ngIf="tableHeader.customerPhone === 1 && activeSort === 'customerPhone'" class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.customerPhone === 0 && activeSort === 'customerPhone'"
              class="fas fa-long-arrow-alt-down"></i>
            Customer Phone
          </th>
          <th name="customerRole" ngDefaultControl [(ngModel)]="tableHeader.customerRole" (click)="onSort('customerRole')">
            <i *ngIf="tableHeader.customerRole === 1 && activeSort === 'customerRole'" class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.customerRole === 0 && activeSort === 'customerRole'"
              class="fas fa-long-arrow-alt-down"></i>
            Role
          </th>
          <th name="couponCode" ngDefaultControl [(ngModel)]="tableHeader.couponCode" (click)="onSort('couponCode')">
            <i *ngIf="tableHeader.couponCode === 1 && activeSort === 'couponCode'" class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.couponCode === 0 && activeSort === 'couponCode'"
              class="fas fa-long-arrow-alt-down"></i>
            Coupon Code
          </th>

          <th name="type" ngDefaultControl [(ngModel)]="tableHeader.type" (click)="onSort('type')">
            <i *ngIf="tableHeader.type === 1 && activeSort === 'type'" class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.type === 0 && activeSort === 'type'" class="fas fa-long-arrow-alt-down"></i>
            Type
          </th>

          <th name="value" ngDefaultControl [(ngModel)]="tableHeader.value"
            (click)="onSort('value')">
            <i *ngIf="tableHeader.value === 1 && activeSort === 'value'"
              class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.value === 0 && activeSort === 'value'"
              class="fas fa-long-arrow-alt-down"></i>
            Amount
          </th>
          <th name="referral" ngDefaultControl [(ngModel)]="tableHeader.referral"
            (click)="onSort('referral')">
            <i *ngIf="tableHeader.referral === 1 && activeSort === 'referral'"
              class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.referral === 0 && activeSort === 'referral'"
              class="fas fa-long-arrow-alt-down"></i>
            Referral 
          </th>

          <th name="sortCreatedDate" ngDefaultControl [(ngModel)]="tableHeader.sortCreatedDate"
            (click)="onSort('sortCreatedDate')">
            <i *ngIf="tableHeader.sortCreatedDate === 1 && activeSort === 'sortCreatedDate'"
              class="fas fa-long-arrow-alt-up"></i>
            <i *ngIf="tableHeader.sortCreatedDate === 0 && activeSort === 'sortCreatedDate'"
              class="fas fa-long-arrow-alt-down"></i>
            Date 
          </th>


        </thead>
        <tbody>
          <tr *ngFor="let item of filteredCentersList">
            <td><a matTooltip="Customer Details" class="btn btn-link-success font-weight-bold" (click)="navigateToDetails(item)">
              {{ item.customerId}}</a></td>
            <td>{{ item.customerName | titlecase }}</td>
            <td>{{ item.customerPhone  | titlecase}}</td>
            <td>{{ item.customerRole  | titlecase}}</td>
            <td>{{ item.couponCode }}</td>
            <td>{{ item.type }}</td>
            <td>{{ item.value }}</td>
            <td>{{ item.isReferral | titlecase}}</td>
            <td>{{item.createdDate}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="row">
      <div class="mr-2">
        <nav aria-label="Page navigation example">
          <ul class="pagination">
            <li class="page-item">
              <a class="page-link" [ngClass]="{'disabled': paginationData?.currentPage === 0}" (click)="onPageChange(0)" href="javascript:void(0);">
                <span aria-hidden="true">&laquo;&laquo;</span>
                <span class="sr-only">First</span>
              </a>
            </li>
            <li class="page-item">
              <a class="page-link" [ngClass]="{'disabled': paginationData?.currentPage === 0}" (click)="onPageChange(paginationData.currentPage - 1)" href="javascript:void(0);">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
            <li class="page-item">
              <a class="page-link" *ngIf="paginationData?.currentPage !== 0 && paginationData?.currentPage !== 1" (click)="onPageChange(paginationData?.currentPage - 2)" href="javascript:void(0);">{{ paginationData?.currentPage -1 }}</a>
            </li>
            <li class="page-item">
              <a class="page-link" *ngIf="paginationData?.currentPage !== 0" (click)="onPageChange(paginationData?.currentPage - 1)" href="javascript:void(0);">{{ paginationData?.currentPage}}</a>
            </li>
            <li class="page-item">
              <a class="page-link active" href="javascript:void(0);">{{ paginationData?.currentPage + 1 }}</a>
            </li>
            <li class="page-item">
              <a class="page-link" *ngIf="paginationData?.pages.length !== 0 && paginationData?.currentPage !== paginationData.pages.length - 1" (click)="onPageChange(paginationData?.currentPage + 1)" href="javascript:void(0);">{{ paginationData?.currentPage + 2 }}</a>
            </li>
            <li class="page-item">
              <a class="page-link" *ngIf="paginationData?.pages.length !== 0 && paginationData?.currentPage !== paginationData.pages.length - 1 && paginationData?.currentPage !== paginationData.pages.length - 2" (click)="onPageChange(paginationData?.currentPage + 2)" href="javascript:void(0);">{{ paginationData?.currentPage + 3 }}</a>
            </li>
            <li class="page-item">
              <a class="page-link" [ngClass]="{'disabled': paginationData?.currentPage === paginationData.pages.length - 1 || paginationData?.pages.length === 0}" (click)="onPageChange(paginationData.currentPage + 1)" href="javascript:void(0);">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>
            </li>
            <li class="page-item">
              <a class="page-link" [ngClass]="{'disabled': paginationData?.currentPage === paginationData.pages.length - 1 || paginationData?.pages.length === 0}" (click)="onPageChange(paginationData.pages.length - 1)" href="javascript:void(0);">
                <span aria-hidden="true">&raquo;&raquo;</span>
                <span class="sr-only">Last</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <div class="mr-2">
        <select class="custom-select" style="height: calc(1.2em + 1rem + 2px); padding: 0.35rem 2rem 0.35rem 1rem;"
          [(ngModel)]="paginationData.pageSize" (change)="onPageSizeChange()">
          <option [ngValue]="20">20 per page</option>
          <option [ngValue]="50">50 per page</option>
          <option [ngValue]="100">100 per page</option>
        </select>
      </div>      
      <div class="pt-2">
        <small class="text-muted">(Total: {{searchText !== '' ? searchedCenters.length : centersData.length}})</small>
      </div> 
    </div>
  </div>
</div>