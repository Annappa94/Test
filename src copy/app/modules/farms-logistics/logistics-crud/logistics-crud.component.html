<div class="card card-custom gutter-b">
    <div class="card-header">
      <div class="card-title">
        <h3 class="card-label">{{id ? "Update Logistic Details" : "New Logistic Details" }}</h3>
      </div>
      <div class="card-toolbar">
        <!-- Nothing right now-->
      </div>
    </div>
    <div class="card-body pt-0">

      <!-- Logistic Partner FORM -->
      <div class="form form-label-right">
        <div class="form-group row" style="padding-top: 0px;">
          <div class="col-lg-12">
            <div class="row" [formGroup]="formGroup">


              <div class="col-lg-3 mt-2">
                <label>Select Partner Type</label>
                <select class="form-control form-control-lg" formControlName="customerType" name="customerType"
                  placeholder="Select Customer Type" (change)="onChangeUserType($event.target.value)">
                  <option value="INDIVIDUAL">INDIVIDUAL</option>
                  <option value="COMPANY">COMPANY</option>
                </select>
              </div>

              <div class="col-lg-12 mt-6">
                <ngb-accordion #acc11="ngbAccordion">
                  <ngb-panel id="toggle-bank">
                    <ng-template ngbPanelTitle>
                      <span class="ard-header--title text-success">Company/Owner Details<span class="text-danger">*</span></span>
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <div class="row pb-10">
                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Company/Owner Name<span class="text-danger">*</span></label>
                          <input type="text" class="form-control form-control-lg" name="merchantName" placeholder="merchantName"
                            autocomplete="off" formControlName="merchantName" [class.is-invalid]="isControlInvalid('merchantName')"
                            [class.is-valid]="isControlValid('merchantName')"/>

                            <div class="valid-feedback" *ngIf="isControlValid('merchantName')">Name was entered correct</div>
                            <div class="invalid-feedback" *ngIf="controlHasError('required', 'merchantName')">Name is required</div>
                            <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'merchantName')">Name should not contain digits</div>
                        </div>


                        <div class="col-lg-3 mt-2" *ngIf="userTypeChange == 'COMPANY'">
                          <label class="form-label">Brand Name</label>
                          <input type="text" class="form-control form-control-lg" name="brandName" placeholder="Brand Name"
                            autocomplete="off" [class.is-invalid]="isControlInvalid('brandName')"
                            [class.is-valid]="isControlValid('brandName')" formControlName="brandName" />
                        </div>

                        <div class="col-lg-3 mt-2" *ngIf="userTypeChange == 'COMPANY'">
                          <label class="form-label">Email<span class="text-danger">*</span></label>
                          <input type="text" class="form-control form-control-lg" name="email" placeholder="Email"
                            autocomplete="off" [class.is-invalid]="isControlInvalid('email')"
                            [class.is-valid]="isControlValid('email')" formControlName="email" />
                          <!-- <div class="valid-feedback" *ngIf="isControlValid('email')">Name was entered correct</div>
                          <div class="invalid-feedback" *ngIf="controlHasError('required', 'email')">Name is required</div> -->
                        </div>

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Mobile Number<span class="text-danger">*</span></label>
                          <input type="text" class="form-control form-control-lg" name="mobile"
                            placeholder="Mobile Number" autocomplete="off" [class.is-invalid]="isControlInvalid('mobile')"
                            [class.is-valid]="isControlValid('mobile')" formControlName="mobile" />
                          <div class="valid-feedback" *ngIf="isControlValid('mobile')">Mobile number was entered correct
                          </div>
                          <div class="invalid-feedback" *ngIf="controlHasError('required', 'mobile')">Mobile number is
                            required</div>
                        </div>

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Transporter ID<span class="text-danger" *ngIf="userTypeChange == 'COMPANY'">*</span></label>
                          <input type="text" class="form-control form-control-lg" name="transporterId"
                            placeholder="Transporter ID " autocomplete="off" [class.is-invalid]="isControlInvalid('transporterId')"
                            [class.is-valid]="isControlValid('transporterId')" formControlName="transporterId"/>
                          <div class="valid-feedback" *ngIf="isControlValid('transporterId')">Transporter ID was entered correct
                          </div>
                          <div class="invalid-feedback" *ngIf="controlHasError('required', 'transporterId')">Transporter ID is
                            required</div>
                        </div>

                        

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Referred by</label>
                          <input type="text" class="form-control form-control-lg"
                            placeholder="Referred by" autocomplete="off" formControlName="refferedBy"/>
                        </div>
                      </div>

                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>

              <div class="col-lg-12 mt-6">
                <ngb-accordion #acc11="ngbAccordion">
                  <ngb-panel id="toggle-bank">
                    <ng-template ngbPanelTitle>
                      <span class="ard-header--title text-success">Alternate Contact Details</span>
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <div class="row pb-10" [formGroup]="formGroup.get('alternateContactDetails')" >

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Name</label>
                          <input type="text" class="form-control form-control-lg"
                            placeholder=" Name" autocomplete="off" formControlName="name"/>
                            <!-- <div class="valid-feedback" *ngIf="isControlValid('name')">Name was entered correct</div>
                            <div class="invalid-feedback" *ngIf="controlHasError('required', 'name')">Name is required</div>
                            <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'name')">Name should not contain digits</div> -->
                        </div>

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Mobile</label>
                          <input type="number" class="form-control form-control-lg"
                            placeholder="Mobile Number" autocomplete="off" formControlName="alternateMobile" />
                        </div>

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Relationship</label>
                          <input type="text" class="form-control form-control-lg"
                            placeholder="Relationship" autocomplete="off" formControlName="relationship">
                        </div>
                      </div>
                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>
             
              <!-- Vehicle Details -->
              <div class="col-lg-12 mt-6" *ngIf="userTypeChange != 'COMPANY' && !editForm">
                <ngb-accordion #acc11="ngbAccordion">
                  <ngb-panel id="toggle-bank">
                    <ng-template ngbPanelTitle>
                      <span class="ard-header--title text-success">Vehicle Details</span>
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <div class="row">
                        <div class="col-lg-3 mt-2">
                          <label>Select Vehicle Type </label>
                          <select class="form-control form-control-lg" formControlName="vehicleType" name="customerType"
                            placeholder="Select Vehicle Type">
                            <option value="LMV">LMV (motorcars, jeeps, taxis, delivery vans)</option>
                            <option value="HMV">HMV(Heavy Motor Vehicles)</option>
                          </select>
                          <!-- <div class="invalid-feedback" *ngIf="VehicleFormcontrolHasError('required', 'vehicleType')">Vehicle Type is required</div> -->
                        </div>
                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Vehicle Number</label>
                            <input type="text" class="form-control form-control-lg" name="vehicleNumber"
                              placeholder="Vehicle Number" autocomplete="off"
                               formControlName="vehicleNumber" />
                            <!-- <div class="invalid-feedback" *ngIf="VehicleFormcontrolHasError('required', 'vehicleNumber')">Vehicle number is
                              required</div> -->
                        </div>

                      </div>
                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>
              <!-- Driver License Details -->
              <div class="col-lg-12 mt-6" *ngIf="userTypeChange != 'COMPANY'">
                <ngb-accordion #acc11="ngbAccordion">
                  <ngb-panel id="toggle-address">
                    <ng-template ngbPanelTitle>
                      <span class="ard-header--title text-success">Driving License Details</span>
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <div class="row">
                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Driving Liense No.</label>
                          <input type="text" class="form-control form-control-lg" name="Land Size"
                            placeholder="Driving Liense No" autocomplete="off" formControlName="DrivingLienseNumber" />
                        </div>

                        

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Name on DL</label>
                          <input type="text" class="form-control form-control-lg" name="city"
                            placeholder="Name on DL" autocomplete="off" formControlName="nameOnDl" />
                        </div>

                        <div class="col-lg-3 mt-2">
                          <label class="form-label">Fathers/Guardians Name</label>
                          <input type="text" class="form-control form-control-lg" name="city"
                            placeholder="Fathers/Guardians Name" autocomplete="off" formControlName="fatherName" />
                        </div>

                        <div class="col-lg-3 mt-2">
                            <label for="name">Date of DL Issued</label>
                            <!-- <br> -->
                            <mat-form-field class="w-100 cursor-pointer" appearance="fill" (click)="dp3.open()">
                                <input formControlName="DlIssuedDate" class="cursor-pointer" matInput [matDatepicker]="dp3"
                                (click)="dp3.open()" (dateChange)="changeSowingTimeEvent($event)" readonly>
                                <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
                                <mat-datepicker #dp3 disabled="false"></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-3 mt-2">
                            <label for="name">DL Expiry Date</label>
                            <!-- <br> -->
                            <mat-form-field class="w-100 cursor-pointer" appearance="fill" (click)="dp4.open()">
                                <input formControlName="DlExpiryDate" class="cursor-pointer" matInput [matDatepicker]="dp4"
                                (click)="dp4.open()" [min]="expiaryDate" readonly>
                                <mat-datepicker-toggle matSuffix [for]="dp4"></mat-datepicker-toggle>
                                <mat-datepicker #dp4 disabled="false"></mat-datepicker>
                            </mat-form-field>
                        </div>




                        

                      </div>
                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>
             

              <div class="col-lg-12 mt-6">
                <bank-form [layouttype]="'page'"  #bank></bank-form>
            </div>

            <div class="col-lg-12 mt-6">
                <address-pincode-form  [layouttype]="'page'" #address></address-pincode-form>
            </div>
              

            </div>
          </div>
        </div>
        <div class="card-toolbar">
          <button type="button" class="btn btn-sm btn-secondary mr-2" (click)="goBack();">Back</button>

          <button type="submit" class="btn btn-sm btn-success" [disabled]="formGroup.invalid"
            (click)="saveLogisticDetails(formGroup.value)">Save</button>

        </div>
      </div>

    </div>
  </div>



  <div class="symbol symbol-50 symbol-light mr-1 cursor-pointer" *ngIf="modelImageUrl" appNoRightClick>

    <!-- The Modal -->
    <div id="reviewModel" class="modal" [ngClass]="{'display-block' : expandImage, 'display-none' : !expandImage}">

      <!-- The Close Button -->
      <span class="close" (click)="expandImage = false">&times;</span>

      <!-- Modal Content (The Image) -->
      <img class="modal-content" *ngIf="!modelImageUrl?.includes('.pdf')" [src]="modelImageUrl">
      <!-- <pdf-viewer *ngIf="modelImageUrl?.includes('.pdf')" src="{{modelImageUrl}}"></pdf-viewer> -->
    </div>
    <!-- </span> -->
  </div>
